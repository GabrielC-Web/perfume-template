<div class="row g-0 flex-column kartBorder">

    <div class="col-12 mb-5 p-3" style="background-color: #F7F7F7;">
        <h4 class="cmm-txt-uppercase text-center m-0">agregado al carrito</h4>
    </div>

    <!-- <span>
        Producto
    </span>
    <span>
        Cantidad
    </span>
    <span>
        Precio
    </span> -->

    <div class="col-12 position-relative">

        <div class="row w-100 g-0">

            <!-- Títulos de las subdivisiones del carrito -->
            <div class="col-12 d-none d-md-flex justify-content-between mb-3">

                <div class="w-100 d-flex flex-column flex-md-row justify-content-between align-items-center px-4">

                    <div class="kart_item_product">

                        <h4 class="cmm-txt-thin-bold">Producto</h4>

                    </div>

                    <div class="kart_item_controls d-flex justify-content-between">

                        <h4 class="cmm-txt-thin-bold">Cantidad</h4>
                        <h4 class="cmm-txt-thin-bold">Precio</h4>
                        <div></div>

                    </div>

                </div>


            </div>

            <!-- Productos del carrito -->
            <div *ngFor="let product of products; let i = index" class="col-12 mb-3">

                <div
                    class="border rounded w-100 d-flex flex-column flex-md-row justify-content-between align-items-center px-4 py-3 kart_item">

                    <!-- Producto -->
                    <div class="d-flex justify-content-start kart_item_product gap-3">

                        <!-- Imagen del producto -->
                        <img [src]="product.image" style="max-width: 100px; max-height: 80px;">

                        <!-- Nombre y marca -->
                        <div class="d-flex flex-column cmm-txt-uppercase justify-content-center">

                            <!-- Data del producto -->

                            <h4 class="cmm-txt-thin-bold fs-16">{{product.name}}</h4>

                            <span class="fs-12">{{'by ' + product.brandName}}</span>

                            <!-- Información adicional -->
                            <div *ngFor="let item of product.aditionalInfo | keyvalue" class="fs-12 d-flex gap-1">

                                <span>{{item.key + ':'}}</span>

                                <span class="cmm-txt-thin-bold">{{item.value}}</span>

                            </div>

                            <span class="fs-12">{{'sku: ' + product.sku}}</span>

                        </div>

                    </div>

                    <!-- Controles -->
                    <div
                        class="d-flex align-items-center justify-content-between gap-4 mt-3 mt-md-0 kart_item_controls">

                        <!-- Cantidad -->
                        <div class="border px-3 py-2 rounded d-flex justify-content-between fs-12"
                            style="min-width: 120px;">

                            <mat-icon class="fs-16 cursor-pointer"
                                style="width: 16px !important; height: 16px !important;"
                                (click)="removeProductUnit(product)">remove</mat-icon>

                            <span class="cmm-txt-thin-bold">{{product.quantity}}</span>

                            <mat-icon class="fs-16 cursor-pointer"
                                style="width: 16px !important; height: 16px !important;"
                                (click)="addProductUnit(product)">add</mat-icon>

                        </div>

                        <!-- Precio -->
                        <div class="cmm-txt-thin-bold cmm-txt-uppercase">

                            {{product.price + ' ' + product.currency}}

                        </div>

                        <!-- Ícono de borrar -->
                        <mat-icon class="cursor-pointer" (click)="removeFromKart(product)">delete</mat-icon>
                    </div>


                </div>

            </div>

        </div>

    </div>


    <!-- Prefactura -->

    <div class="rounded border p-4 col-12">

        <h4 class="cmm-txt-thin-bold cmm-txt-uppercase">total de la orden</h4>

        <mat-divider></mat-divider>

        <div class="d-flex justify-content-between">

            <span>Precio</span>
            <span>{{preBill.basePrice + ' ' + preBill.currency}}</span>

        </div>
        <div class="d-flex justify-content-between">

            <span>Delivery</span>
            <span>{{preBill.delivery + ' ' + preBill.currency}}</span>

        </div>
        <div class="d-flex justify-content-between">

            <span>Código de DSCTO</span>
            <span>{{preBill.discount}}</span>

        </div>
        <div class="d-flex justify-content-between">

            <span>Total</span>
            <span>{{preBill.totalPrice + ' ' + preBill.currency}}</span>

        </div>

    </div>

    <div class="row g-0 justify-content-end mt-5" style="gap: 2rem;">

        <cmp-cmm-new-button [outlined]="true" class="w-fit"
            [config]="{customBorderRadius: config.customButtonsBorderRadius}" (click)="navigateBack()">
            REGRESAR
        </cmp-cmm-new-button>

        <cmp-cmm-new-button class="w-fit" [config]="{customBorderRadius: config.customButtonsBorderRadius}">
            PAGAR
        </cmp-cmm-new-button>

    </div>

</div>